<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ« å‹•ç”» â€” ãƒã‚¯å£²ã‚ŒLPãƒ†ãƒ³ãƒ—ãƒ¬</title>
    <meta name="description" content="ãƒã‚¯å£²ã‚ŒLPãƒ†ãƒ³ãƒ—ãƒ¬ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‘ã‘å‹•ç”»ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ã™ã€‚è²©å£²ãƒ•ãƒ­ãƒ¼ã‚„ææ¡ˆæ–¹æ³•ã‚’å‹•ç”»ã§è§£èª¬ã—ã¦ã„ã¾ã™ã€‚">
    <meta name="robots" content="noindex, nofollow">
    <meta property="og:title" content="ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ« å‹•ç”» â€” ãƒã‚¯å£²ã‚ŒLPãƒ†ãƒ³ãƒ—ãƒ¬">
    <meta property="og:description" content="ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼å‘ã‘å‹•ç”»ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã€‚è²©å£²ãƒ•ãƒ­ãƒ¼ã‚„ææ¡ˆæ–¹æ³•ã‚’è§£èª¬ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="ãƒã‚¯å£²ã‚ŒLPãƒ†ãƒ³ãƒ—ãƒ¬">
    <meta property="og:image" content="/bakuure-ogp.png">
    <link rel="icon" href="/bakuure-icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+JP:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#FAFAFA;--bg-card:#FFF;--border:#E5E7EB;--border-hover:#D1D5DB;--text-primary:#111827;--text-secondary:#6B7280;--text-muted:#7C8290;--accent:#0852FF;--accent-light:rgba(8,82,255,.08);--accent-subtle:rgba(8,82,255,.04);--success:#10B981;--radius-lg:20px}
        *{box-sizing:border-box;margin:0;padding:0}
        body{font-family:'Inter','Noto Sans JP',-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:var(--bg);color:var(--text-primary);line-height:1.7;font-size:15px;-webkit-font-smoothing:antialiased;min-height:100vh}
        .ambient-glow{position:fixed;top:-20%;left:50%;transform:translateX(-50%);width:900px;height:600px;background:radial-gradient(ellipse,rgba(8,82,255,.04) 0%,transparent 70%);pointer-events:none;z-index:0}
        .site-header{position:sticky;top:0;z-index:100;background:rgba(255,255,255,.85);backdrop-filter:saturate(180%) blur(20px);-webkit-backdrop-filter:saturate(180%) blur(20px);border-bottom:1px solid var(--border)}
        .header-inner{max-width:1200px;margin:0 auto;padding:14px 24px;display:flex;align-items:center;justify-content:space-between}
        .header-logo img{height:58px}
        .header-label{font-size:13px;font-weight:500;color:var(--text-muted)}
        .main-content{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:0 24px 100px}
        .hero{padding:64px 0 48px;text-align:center}
        .hero-eyebrow{display:inline-flex;align-items:center;gap:8px;font-size:12px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--accent);background:var(--accent-light);padding:6px 16px;border-radius:100px;margin-bottom:20px}
        .hero h1{font-size:clamp(26px,5vw,38px);font-weight:800;letter-spacing:-.03em;line-height:1.2;margin-bottom:12px}
        .hero-sub{font-size:15px;color:var(--text-secondary);max-width:520px;margin:0 auto}
        .tab-nav{display:flex;gap:4px;background:var(--bg-card);border:1px solid var(--border);border-radius:14px;padding:4px;margin-bottom:32px;overflow-x:auto}
        .tab-btn{flex:1;padding:12px 20px;border-radius:10px;font-size:14px;font-weight:600;text-align:center;text-decoration:none;color:var(--text-secondary);background:transparent;border:none;cursor:pointer;font-family:inherit;transition:all .2s;white-space:nowrap;min-width:fit-content}
        .tab-btn.active{background:var(--accent);color:#fff;box-shadow:0 2px 8px rgba(8,82,255,.2)}
        .tab-btn:not(.active):hover{background:var(--accent-subtle);color:var(--accent)}

        /* Layout: sidebar + content */
        .content-layout{display:flex;gap:32px;align-items:flex-start}
        .sidebar{width:220px;flex-shrink:0;position:sticky;top:88px}
        .sidebar-nav{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);padding:20px;box-shadow:0 1px 3px rgba(0,0,0,.04)}
        .sidebar-title{font-size:11px;font-weight:700;color:var(--text-muted);text-transform:uppercase;letter-spacing:.1em;margin-bottom:14px;padding:0 12px}
        .sidebar-link{display:flex;align-items:center;gap:10px;padding:9px 12px;border-radius:10px;font-size:13px;font-weight:500;color:var(--text-secondary);text-decoration:none;transition:all .2s;line-height:1.4}
        .sidebar-link:hover{background:var(--accent-subtle);color:var(--accent)}
        .sidebar-link.active{background:var(--accent-light);color:var(--accent);font-weight:600}
        .sidebar-dot{width:6px;height:6px;border-radius:50%;background:var(--border);flex-shrink:0;transition:background .2s}
        .sidebar-link.active .sidebar-dot{background:var(--accent)}
        .sidebar-count{margin-left:auto;font-size:11px;font-weight:600;color:var(--text-muted);background:var(--bg);border-radius:100px;padding:1px 7px;min-width:22px;text-align:center}
        .sidebar-link.active .sidebar-count{background:rgba(8,82,255,.12);color:var(--accent)}
        .content-area{flex:1;min-width:0}

        /* Category sections */
        .cat-section{margin-bottom:48px;scroll-margin-top:100px}
        .cat-title{font-size:18px;font-weight:700;letter-spacing:-.01em;margin-bottom:20px;display:flex;align-items:center;gap:10px;opacity:0;transform:translateY(12px);animation:fadeUp .5s ease forwards}
        .cat-title svg{width:20px;height:20px;stroke:var(--accent);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}

        .video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}
        .video-card{background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 1px 3px rgba(0,0,0,.04);opacity:0;transform:translateY(16px);animation:fadeUp .5s ease forwards}
        .video-card:hover{border-color:var(--accent);box-shadow:0 16px 40px rgba(8,82,255,.06),0 0 0 1px var(--accent)}
        .video-thumb{position:relative;width:100%;padding-top:56.25%;background:#1E293B;overflow:hidden}
        .video-thumb iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:none}
        .video-placeholder{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;cursor:pointer;transition:background .3s}
        .video-placeholder:hover{background:rgba(255,255,255,.05)}
        .video-placeholder svg{width:56px;height:56px;fill:rgba(255,255,255,.85);filter:drop-shadow(0 2px 8px rgba(0,0,0,.3));transition:transform .3s}
        .video-placeholder:hover svg{transform:scale(1.1)}
        .video-placeholder span{color:rgba(255,255,255,.5);font-size:12px;font-weight:500}
        .video-info{padding:20px 24px}
        .video-info h3{font-size:15px;font-weight:700;letter-spacing:-.01em;line-height:1.4;margin-bottom:8px}
        .video-info p{font-size:13px;color:var(--text-secondary);line-height:1.6}
        .video-meta{display:flex;align-items:center;gap:10px;margin-top:10px}
        .video-meta span{font-size:12px;color:var(--text-muted);display:flex;align-items:center;gap:4px}
        .video-meta svg{width:12px;height:12px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
        .loading-state{text-align:center;padding:80px 24px}
        .loading-spinner{width:40px;height:40px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 16px}
        @keyframes spin{to{transform:rotate(360deg)}}
        .loading-state p{font-size:14px;color:var(--text-muted)}
        .empty-state{text-align:center;padding:80px 24px}
        .empty-state svg{width:64px;height:64px;stroke:var(--border);fill:none;stroke-width:1.5;margin-bottom:16px}
        .empty-state h3{font-size:18px;font-weight:700;margin-bottom:8px}
        .empty-state p{font-size:14px;color:var(--text-muted)}
        .error-state{text-align:center;padding:60px 24px;background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-lg)}
        .error-state p{font-size:14px;color:var(--text-muted)}
        .site-footer{text-align:center;padding:32px 24px;border-top:1px solid var(--border)}
        .site-footer p{font-size:12px;color:var(--text-muted)}
        @keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
        @media(max-width:960px){
            .content-layout{flex-direction:column;gap:0}
            .sidebar{width:100%;position:static;margin-bottom:24px}
            .sidebar-nav{display:flex;overflow-x:auto;gap:4px;padding:8px;-webkit-overflow-scrolling:touch}
            .sidebar-title{display:none}
            .sidebar-link{white-space:nowrap;padding:7px 14px;font-size:12px;border-radius:8px;background:var(--bg);border:1px solid var(--border)}
            .sidebar-link.active{border-color:var(--accent)}
            .sidebar-dot{display:none}
            .sidebar-count{font-size:10px;padding:1px 5px}
        }
        @media(max-width:768px){.video-grid{grid-template-columns:1fr;gap:16px}.hero{padding:48px 0 36px}.main-content{padding:0 16px 60px}.header-inner{padding:14px 16px}.tab-nav{gap:2px;padding:3px}}
        @media(max-width:480px){.header-logo img{height:40px}.tab-btn{padding:10px 14px;font-size:13px}}
    </style>
</head>
<body>
    <div class="ambient-glow"></div>
    <header class="site-header">
        <div class="header-inner">
            <div class="header-logo"><a href="/manual/videos/" style="display:flex;align-items:center;text-decoration:none;"><img src="/bakuure-logo.svg" alt="ãƒã‚¯å£²ã‚ŒLPãƒ†ãƒ³ãƒ—ãƒ¬"></a></div>
            <span class="header-label">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</span>
        </div>
    </header>
    <main class="main-content">
        <section class="hero">
            <p class="hero-eyebrow">Partner Manual</p>
            <h1>ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</h1>
            <p class="hero-sub">ãƒã‚¯å£²ã‚ŒLPãƒ†ãƒ³ãƒ—ãƒ¬ã®è²©å£²ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ§˜å‘ã‘ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ã™ã€‚<br>è²©å£²ãƒ•ãƒ­ãƒ¼ãƒ»ææ¡ˆæ–¹æ³•ãƒ»æ´»ç”¨äº‹ä¾‹ã‚’å‹•ç”»ã§ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¦ã„ã¾ã™ã€‚</p>
        </section>
        <nav class="tab-nav">
            <a href="/manual/videos/" class="tab-btn active">å‹•ç”»ãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a>
            <a href="/manual/resources/" class="tab-btn">å–¶æ¥­è³‡æ–™</a>
            <a href="/manual/faq/" class="tab-btn">FAQ</a>
        </nav>
        <div class="content-layout">
            <aside class="sidebar" id="sidebar">
                <nav class="sidebar-nav" id="sidebarNav">
                    <p class="sidebar-title">ã‚«ãƒ†ã‚´ãƒªãƒ¼</p>
                </nav>
            </aside>
            <div class="content-area">
                <div id="videoContainer"></div>
                <div id="loadingState" class="loading-state"><div class="loading-spinner"></div><p>å‹•ç”»ä¸€è¦§ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p></div>
                <div id="emptyState" class="empty-state" style="display:none">
                    <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
                    <h3>å‹•ç”»ã¯ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</h3>
                    <p>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¿½åŠ ã•ã‚Œã‚‹ã¾ã§ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚</p>
                </div>
            </div>
        </div>
    </main>
    <footer class="site-footer"><p>&copy; 2026 ãƒã‚¯å£²ã‚ŒLPãƒ†ãƒ³ãƒ—ãƒ¬ &amp; CHAINSODA Co., Ltd. â€” All rights reserved.</p></footer>
    <script>
    const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTza74lwZCv56xNnhI4fDgEk5zCvq4WAcvNboRGbByVxPLSh-NZLIe8eVdATny0exFPGPW8ew9O7Jm8/pub?gid=396280088&single=true&output=csv';

    function parseCSV(text) {
        const rows = []; let cur = []; let field = ''; let inQ = false;
        for (let i = 0; i < text.length; i++) {
            const c = text[i];
            if (inQ) {
                if (c === '"' && text[i+1] === '"') { field += '"'; i++; }
                else if (c === '"') { inQ = false; }
                else { field += c; }
            } else {
                if (c === '"') { inQ = true; }
                else if (c === ',') { cur.push(field); field = ''; }
                else if (c === '\n' || (c === '\r' && text[i+1] === '\n')) {
                    cur.push(field); field = ''; rows.push(cur); cur = [];
                    if (c === '\r') i++;
                } else { field += c; }
            }
        }
        if (field || cur.length) { cur.push(field); rows.push(cur); }
        return rows;
    }

    function extractYouTubeId(url) {
        if (!url) return null;
        if (/^[\w-]{11}$/.test(url)) return url;
        const m = url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/))([^&?#\s]{11})/);
        return m ? m[1] : null;
    }

    function escapeHtml(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

    function slugify(str) {
        return str.replace(/[^\w\u3000-\u9FFF]/g, '').replace(/\s+/g, '-') || 'cat';
    }

    async function loadVideos() {
        const container = document.getElementById('videoContainer');
        const loading = document.getElementById('loadingState');
        const empty = document.getElementById('emptyState');
        const sidebarNav = document.getElementById('sidebarNav');
        try {
            const res = await fetch(CSV_URL + '&t=' + Date.now());
            if (!res.ok) throw new Error('Fetch failed');
            const text = await res.text();
            const rows = parseCSV(text).slice(1).filter(r => (r[0]||'').trim().toUpperCase() === 'ON');
            loading.style.display = 'none';
            if (rows.length === 0) {
                empty.style.display = 'block';
                document.getElementById('sidebar').style.display = 'none';
                return;
            }

            // Group by category
            const categories = {};
            const catOrder = [];
            rows.forEach(function(r) {
                const cat = (r[1] || 'æœªåˆ†é¡').trim();
                if (!categories[cat]) { categories[cat] = []; catOrder.push(cat); }
                categories[cat].push({ url: r[2]||'', title: r[3]||'', desc: r[4]||'', material: r[5]||'' });
            });

            // Build sidebar links
            const sectionIds = [];
            catOrder.forEach(function(catName, ci) {
                const secId = 'vc-' + ci;
                sectionIds.push(secId);
                const link = document.createElement('a');
                link.href = '#' + secId;
                link.className = 'sidebar-link' + (ci === 0 ? ' active' : '');
                link.innerHTML = '<span class="sidebar-dot"></span>'
                    + escapeHtml(catName)
                    + '<span class="sidebar-count">' + categories[catName].length + '</span>';
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById(secId).scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
                sidebarNav.appendChild(link);
            });

            // Build category sections
            let cardIdx = 0;
            catOrder.forEach(function(catName, ci) {
                const items = categories[catName];
                const secId = 'vc-' + ci;

                const section = document.createElement('div');
                section.className = 'cat-section';
                section.id = secId;

                const title = document.createElement('h2');
                title.className = 'cat-title';
                title.style.animationDelay = (ci * 0.08) + 's';
                title.innerHTML = '<svg viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>' + escapeHtml(catName);
                section.appendChild(title);

                const grid = document.createElement('div');
                grid.className = 'video-grid';
                section.appendChild(grid);

                items.forEach(function(item) {
                    const videoId = extractYouTubeId(item.url);
                    const card = document.createElement('div');
                    card.className = 'video-card';
                    card.style.animationDelay = (cardIdx * 0.06) + 's';
                    cardIdx++;

                    let thumbHtml;
                    if (videoId) {
                        thumbHtml = '<div class="video-thumb"><div class="video-placeholder" data-vid="' + videoId + '" onclick="playVideo(this)">'
                            + '<img src="https://img.youtube.com/vi/' + videoId + '/hqdefault.jpg" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;opacity:.6" alt="">'
                            + '<svg viewBox="0 0 24 24" style="position:relative;z-index:1"><path d="M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"/></svg>'
                            + '<span style="position:relative;z-index:1">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å†ç”Ÿ</span></div></div>';
                    } else {
                        thumbHtml = '<div class="video-thumb"><div class="video-placeholder"><svg viewBox="0 0 24 24"><path d="M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"/></svg><span>æº–å‚™ä¸­</span></div></div>';
                    }

                    let infoHtml = '<div class="video-info"><h3>' + escapeHtml(item.title) + '</h3>';
                    if (item.desc) infoHtml += '<p>' + escapeHtml(item.desc) + '</p>';
                    infoHtml += '<div class="video-meta">';
                    if (item.material) infoHtml += '<span><a href="' + escapeHtml(item.material) + '" target="_blank" rel="noopener" style="color:var(--accent);text-decoration:none;font-weight:600">ğŸ“ è³‡æ–™</a></span>';
                    infoHtml += '</div></div>';

                    card.innerHTML = thumbHtml + infoHtml;
                    grid.appendChild(card);
                });

                container.appendChild(section);
            });

            // IntersectionObserver for active sidebar link
            setupScrollSpy(sectionIds);
        } catch (err) {
            console.error('Video CSV load error:', err);
            loading.innerHTML = '<div class="error-state"><p>å‹•ç”»ä¸€è¦§ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚</p></div>';
            document.getElementById('sidebar').style.display = 'none';
        }
    }

    function setupScrollSpy(sectionIds) {
        const links = document.querySelectorAll('.sidebar-link');
        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                if (entry.isIntersecting) {
                    const idx = sectionIds.indexOf(entry.target.id);
                    if (idx >= 0) {
                        links.forEach(function(l) { l.classList.remove('active'); });
                        links[idx].classList.add('active');
                    }
                }
            });
        }, { rootMargin: '-80px 0px -60% 0px', threshold: 0 });
        sectionIds.forEach(function(id) {
            const el = document.getElementById(id);
            if (el) observer.observe(el);
        });
    }

    function playVideo(el) {
        const vid = el.dataset.vid;
        if (!vid) return;
        const thumb = el.closest('.video-thumb');
        thumb.innerHTML = '<iframe src="https://www.youtube.com/embed/' + vid + '?autoplay=1&rel=0" allow="autoplay;encrypted-media" allowfullscreen></iframe>';
    }

    loadVideos();
    </script>
</body>
</html>
